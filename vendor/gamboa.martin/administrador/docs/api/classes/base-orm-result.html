<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>Documentation</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category -namespaces">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/base.html" class="">base</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/base-controller.html" class="">controller</a>
                
            </li>
                    <li>
                <a href="namespaces/base-frontend.html" class="">frontend</a>
                
            </li>
                    <li>
                <a href="namespaces/base-orm.html" class="">orm</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/gamboamartin.html" class="">gamboamartin</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/gamboamartin-administrador.html" class="">administrador</a>
                
            </li>
            </ul>

                        </section>
                <section class="phpdocumentor-sidebar__category -packages">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Application.html" class="">Application</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category -reports">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category -indices">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                <section>
                                        <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/base.html">base</a></li>
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/base-orm.html">orm</a></li>
    </ul>

    <article class="phpdocumentor-element -class">
        <h2 class="phpdocumentor-content__title">
    _result

    
            <div class="phpdocumentor-element__package">
            in package
            <ul class="phpdocumentor-breadcrumbs">
                                    <li class="phpdocumentor-breadcrumb"><a href="packages/Application.html">Application</a></li>
                            </ul>
        </div>
    
    
    </h2>

<div class="phpdocumentor-label-line">


</div>

        <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">10</span>

    </aside>

        








<h3 id="toc">
    Table of Contents
    <a href="classes/base-orm-result.html#toc" class="headerlink"><i class="fas fa-link"></i></a>

</h3>









<h4 id="toc-properties">
    Properties
    <a href="classes/base-orm-result.html#toc-properties" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -property -private">
    <a class="" href="classes/base-orm-result.html#property_error">$error</a>
    <span>
                        &nbsp;: <abbr title="\gamboamartin\errores\errores">errores</abbr>            </span>
</dt>

            <dt class="phpdocumentor-table-of-contents__entry -property -private">
    <a class="" href="classes/base-orm-result.html#property_validacion">$validacion</a>
    <span>
                        &nbsp;: <abbr title="\gamboamartin\administrador\modelado\validaciones">validaciones</abbr>            </span>
</dt>

    </dl>

<h4 id="toc-methods">
    Methods
    <a href="classes/base-orm-result.html#toc-methods" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/base-orm-result.html#method___construct">__construct()</a>
    <span>
                                &nbsp;: mixed    </span>
</dt>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a class="" href="classes/base-orm-result.html#method_data_result">data_result()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Ejecuta una consulta SQL, procesa los resultados y los retorna en un formato estructurado.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_ajusta_row_select">ajusta_row_select()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Ajusta una fila (`$row`) para incluir valores desencriptados y registros hijos relacionados.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_asigna_registros_hijo">asigna_registros_hijo()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Asigna registros hijos a una fila específica utilizando un modelo y un filtro.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_genera_modelos_hijos">genera_modelos_hijos()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Genera una estructura con información de los modelos hijos de un modelo base.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_genera_registro_hijo">genera_registro_hijo()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Genera un registro hijo asociado a una fila específica utilizando un modelo y datos configurados.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_genera_registros_hijos">genera_registros_hijos()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Genera registros hijos para una fila específica utilizando modelos configurados.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_init_result_base">init_result_base()</a>
    <span>
                                &nbsp;: <abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Inicializa el resultado base para un modelo y prepara un objeto con los datos procesados.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_maqueta_arreglo_registros">maqueta_arreglo_registros()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Maqueta un arreglo de registros procesando cada fila obtenida de una consulta SQL.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_maqueta_result">maqueta_result()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Prepara y estructura el resultado de una consulta en un formato estándar.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_parsea_registros_envio">parsea_registros_envio()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Procesa registros obtenidos de una consulta SQL para su envío, desencriptando campos
y agregando registros hijos relacionados.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_result">result()</a>
    <span>
                                &nbsp;: <abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Genera un objeto de resultado con la información procesada de una consulta.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_result_sql">result_sql()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Ejecuta una consulta SQL, procesa los registros y calcula los totales de columnas específicas.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_total_rs_acumula">total_rs_acumula()</a>
    <span>
                                &nbsp;: <abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Acumula el total de un campo específico de un registro en un objeto de totales.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_total_rs_campo">total_rs_campo()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Calcula y acumula el total de un campo específico en un conjunto de registros.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_totales_rs">totales_rs()</a>
    <span>
                                &nbsp;: <abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Calcula los totales acumulados para un conjunto de columnas en un arreglo de registros.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_totales_rs_acumula">totales_rs_acumula()</a>
    <span>
                                &nbsp;: array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr>    </span>
</dt>
<dd>REG
Acumula los valores de un campo específico para un conjunto de registros.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a class="" href="classes/base-orm-result.html#method_valida_totales">valida_totales()</a>
    <span>
                                &nbsp;: true|array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>REG
Valida los totales en un campo específico dentro de un registro.</dd>

    </dl>



        

        
    <section class="phpdocumentor-properties">
        <h3 class="phpdocumentor-elements__header" id="properties">
            Properties
            <a href="classes/base-orm-result.html#properties" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article
        class="
            phpdocumentor-element
            -property
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_error">
        $error
        <a href="classes/base-orm-result.html#property_error" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">12</span>

    </aside>

    
    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
        <span class="phpdocumentor-signature__type"><abbr title="\gamboamartin\errores\errores">errores</abbr></span>
    <span class="phpdocumentor-signature__name">$error</span>
    </code>

    
    
    

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_validacion">
        $validacion
        <a href="classes/base-orm-result.html#property_validacion" class="headerlink"><i class="fas fa-link"></i></a>

        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">13</span>

    </aside>

    
    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
        <span class="phpdocumentor-signature__type"><abbr title="\gamboamartin\administrador\modelado\validaciones">validaciones</abbr></span>
    <span class="phpdocumentor-signature__name">$validacion</span>
    </code>

    
    
    

    

</article>
            </section>

            <section class="phpdocumentor-methods">
        <h3 class="phpdocumentor-elements__header" id="methods">
            Methods
            <a href="classes/base-orm-result.html#methods" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method___construct">
        __construct()
        <a href="classes/base-orm-result.html#method___construct" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">15</span>

    </aside>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                    <span class="phpdocumentor-signature__name">__construct</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
    
    
    

    

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                -final        "
>
    <h4 class="phpdocumentor-element__name" id="method_data_result">
        data_result()
        <a href="classes/base-orm-result.html#method_data_result" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">368</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Ejecuta una consulta SQL, procesa los resultados y los retorna en un formato estructurado.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__final">final</span>            <span class="phpdocumentor-signature__name">data_result</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campos_encriptados</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$columnas_totales</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$consulta</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida que la consulta SQL no esté vacía.</li>
<li>Ejecuta la consulta SQL y procesa los resultados utilizando <code class="prettyprint">result_sql</code>.</li>
<li>Maqueta el resultado final con información adicional como totales, número de registros, y registros en formato
objeto utilizando <code class="prettyprint">maqueta_result</code>.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campos_encriptados</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Campos que requieren desencriptarse en los registros resultantes.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$columnas_totales</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Columnas para las cuales se deben calcular los totales acumulados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$consulta</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>La consulta SQL que se ejecutará.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base que ejecutará la consulta.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_data_result#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Ejecución exitosa con totales</h2>
<p>$campos_encriptados = ['campo_secreto'];
$columnas_totales = ['precio'];
$consulta = &quot;SELECT id, nombre, precio FROM productos&quot;;
$modelo = new modelo_base($link);
$modelo-&gt;tabla = 'productos';</p>
<p>$resultado = $this-&gt;data_result($campos_encriptados, $columnas_totales, $consulta, $modelo);
// $resultado contendrá un objeto con los datos procesados:
// {
//     &quot;registros&quot;: [...],
//     &quot;n_registros&quot;: 5,
//     &quot;sql&quot;: &quot;SELECT id, nombre, precio FROM productos&quot;,
//     &quot;campos_entidad&quot;: [&quot;id&quot;, &quot;nombre&quot;, &quot;precio&quot;],
//     &quot;totales&quot;: {&quot;precio&quot;: 500},
//     &quot;registros_obj&quot;: [
//         {&quot;id&quot;: 1, &quot;nombre&quot;: &quot;Producto A&quot;, &quot;precio&quot;: 100},
//         ...
//     ]
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error en la consulta vacía</h2>
<p>$consulta = &quot;&quot;;
$resultado = $this-&gt;data_result($campos_encriptados, $columnas_totales, $consulta, $modelo);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; &quot;Error consulta vacia&quot;,
//   'data' =&gt; &quot; tabla: productos&quot;,
//   ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error al procesar totales</h2>
<p>$columnas_totales = ['columna_inexistente'];
$resultado = $this-&gt;data_result($campos_encriptados, $columnas_totales, $consulta, $modelo);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; &quot;Error al parsear totales_rs&quot;,
//   'data' =&gt; ...
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto <code class="prettyprint">stdClass</code> con los siguientes datos si el proceso es exitoso:
<ul>
<li>
<code class="prettyprint">registros</code>: Array con los registros procesados.</li>
<li>
<code class="prettyprint">n_registros</code>: Número total de registros procesados.</li>
<li>
<code class="prettyprint">sql</code>: La consulta SQL ejecutada.</li>
<li>
<code class="prettyprint">campos_entidad</code>: Los campos de la entidad del modelo.</li>
<li>
<code class="prettyprint">totales</code>: Objeto con los totales acumulados.</li>
<li>
<code class="prettyprint">registros_obj</code>: Array con los registros procesados como objetos.</li>
</ul>
</li>
<li>Retorna un arreglo con el error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_ajusta_row_select">
        ajusta_row_select()
        <a href="classes/base-orm-result.html#method_ajusta_row_select" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">128</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Ajusta una fila (`$row`) para incluir valores desencriptados y registros hijos relacionados.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">ajusta_row_select</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campos_encriptados</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelos_hijos</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Desencripta los valores de las columnas especificadas en <code class="prettyprint">$campos_encriptados</code> dentro de la fila <code class="prettyprint">$row</code>.</li>
<li>Genera registros hijos relacionados con base en los modelos configurados en <code class="prettyprint">$modelos_hijos</code>.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campos_encriptados</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Lista de nombres de columnas en la fila <code class="prettyprint">$row</code> cuyos valores deben desencriptarse.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base utilizado para generar los modelos hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelos_hijos</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array asociativo de modelos hijos configurados, donde:</p>
<ul>
<li>La clave es el nombre del modelo hijo.</li>
<li>El valor es un array con configuraciones como <code class="prettyprint">nombre_estructura</code>, <code class="prettyprint">namespace_model</code>, etc.</li>
</ul>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>La fila que se ajustará para incluir valores desencriptados y registros hijos.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_ajusta_row_select#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Ajustar una fila con valores desencriptados y registros hijos</h2>
<p>$campos_encriptados = ['nombre', 'email'];
$modelo_base = new modelo_base($link);
$modelos_hijos = [
'detalle_factura' =&gt; [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['factura_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
]
];
$row = [
'id' =&gt; 1,
'nombre' =&gt; 'ValorEncriptado123',
'email' =&gt; 'ValorEncriptado456'
];</p>
<p>$resultado = $this-&gt;ajusta_row_select(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Resultado:
// [
//     'id' =&gt; 1,
//     'nombre' =&gt; 'NombreDesencriptado',
//     'email' =&gt; 'EmailDesencriptado',
//     'detalles' =&gt; [
//         ['id' =&gt; 101, 'factura_id' =&gt; 1, 'activo' =&gt; 'SI'],
//         ['id' =&gt; 102, 'factura_id' =&gt; 1, 'activo' =&gt; 'SI']
//     ]
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error al desencriptar un valor</h2>
<p>$campos_encriptados = ['nombre'];
$modelo_base = new modelo_base($link);
$modelos_hijos = [];
$row = [
'id' =&gt; 1,
'nombre' =&gt; 'ValorEncriptadoErroneo'
];</p>
<p>$resultado = $this-&gt;ajusta_row_select(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Retorna un arreglo de error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error al desencriptar',
//     'data' =&gt; [...],
//     ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Ajustar una fila sin modelos hijos</h2>
<p>$campos_encriptados = ['nombre'];
$modelo_base = new modelo_base($link);
$modelos_hijos = [];
$row = [
'id' =&gt; 1,
'nombre' =&gt; 'ValorEncriptado'
];</p>
<p>$resultado = $this-&gt;ajusta_row_select(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Resultado:
// [
//     'id' =&gt; 1,
//     'nombre' =&gt; 'NombreDesencriptado'
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna la fila ajustada, incluyendo los valores desencriptados y registros hijos.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la ejecución.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_asigna_registros_hijo">
        asigna_registros_hijo()
        <a href="classes/base-orm-result.html#method_asigna_registros_hijo" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">258</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Asigna registros hijos a una fila específica utilizando un modelo y un filtro.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">asigna_registros_hijo</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$filtro</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$name_modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$namespace_model</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$nombre_estructura</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida la estructura y existencia de datos clave como el modelo, namespace y estructura.</li>
<li>Genera un modelo basado en el nombre y namespace proporcionados.</li>
<li>Filtra los registros del modelo utilizando el filtro proporcionado.</li>
<li>Asigna los registros filtrados a la fila bajo una clave específica (<code class="prettyprint">$nombre_estructura</code>).</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$filtro</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Filtro para aplicar en el modelo para obtener los registros hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia de un modelo base utilizado para generar el modelo objetivo.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$name_modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del modelo que se utilizará para obtener los registros.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$namespace_model</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Namespace del modelo para su correcta instanciación.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$nombre_estructura</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre de la clave donde se asignarán los registros hijos en la fila.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Fila en la que se agregarán los registros hijos.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_asigna_registros_hijo#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Asignación exitosa de registros hijos</h2>
<p>$filtro = ['parent_id' =&gt; 1];
$modelo_base = new modelo_base($link);
$name_modelo = 'hijo_modelo';
$namespace_model = 'gamboamartin\facturacion\models';
$nombre_estructura = 'registros_hijos';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Registro Padre'];</p>
<p>$resultado = $this-&gt;asigna_registros_hijo(
filtro: $filtro,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
namespace_model: $namespace_model,
nombre_estructura: $nombre_estructura,
row: $row
);</p>
<p>// Resultado:
// [
//     'id' =&gt; 1,
//     'nombre' =&gt; 'Registro Padre',
//     'registros_hijos' =&gt; [
//         ['id' =&gt; 101, 'parent_id' =&gt; 1, 'nombre' =&gt; 'Hijo 1'],
//         ['id' =&gt; 102, 'parent_id' =&gt; 1, 'nombre' =&gt; 'Hijo 2']
//     ]
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error por modelo inválido</h2>
<p>$filtro = ['parent_id' =&gt; 1];
$modelo_base = new modelo_base($link);
$name_modelo = '';
$namespace_model = 'gamboamartin\facturacion\models';
$nombre_estructura = 'registros_hijos';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Registro Padre'];</p>
<p>$resultado = $this-&gt;asigna_registros_hijo(
filtro: $filtro,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
namespace_model: $namespace_model,
nombre_estructura: $nombre_estructura,
row: $row
);</p>
<p>// Retorna un arreglo de error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error al validar entrada para modelo',
//     'data' =&gt; ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error por nombre de estructura vacío</h2>
<p>$filtro = ['parent_id' =&gt; 1];
$modelo_base = new modelo_base($link);
$name_modelo = 'hijo_modelo';
$namespace_model = 'gamboamartin\facturacion\models';
$nombre_estructura = '';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Registro Padre'];</p>
<p>$resultado = $this-&gt;asigna_registros_hijo(
filtro: $filtro,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
namespace_model: $namespace_model,
nombre_estructura: $nombre_estructura,
row: $row
);</p>
<p>// Retorna un arreglo de error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error nombre estructura no puede venir vacia',
//     'data' =&gt; ''
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna la fila <code class="prettyprint">$row</code> con los registros hijos asignados en la clave <code class="prettyprint">$nombre_estructura</code>.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la ejecución.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_genera_modelos_hijos">
        genera_modelos_hijos()
        <a href="classes/base-orm-result.html#method_genera_modelos_hijos" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">487</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Genera una estructura con información de los modelos hijos de un modelo base.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">genera_modelos_hijos</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método recorre los modelos hijos definidos en la propiedad <code class="prettyprint">hijo</code> del modelo base, validando
que cada modelo cumpla con los requisitos necesarios (como tener filtros, filtros con valor, y
un nombre de estructura definido). Si la validación falla, retorna un arreglo con el error.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base que contiene los modelos hijos.
El modelo base debe tener:</p>
<ul>
<li>
<code class="prettyprint">hijo</code>: Un array asociativo donde cada clave es el nombre del modelo hijo,
y su valor es un array con las propiedades:
<ul>
<li>
<code class="prettyprint">filtros</code>: Array con los filtros aplicables al modelo hijo.</li>
<li>
<code class="prettyprint">filtros_con_valor</code>: Array con los filtros que tienen valores asignados.</li>
<li>
<code class="prettyprint">nombre_estructura</code>: Nombre de la estructura del modelo hijo.</li>
<li>
<code class="prettyprint">namespace_model</code>: Namespace del modelo hijo.</li>
</ul>
</li>
</ul>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_genera_modelos_hijos#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si alguno de los modelos hijos no cumple con las validaciones requeridas:</p>
<ul>
<li>La clave del modelo hijo no puede ser numérica.</li>
<li>Deben existir las propiedades <code class="prettyprint">filtros</code>, <code class="prettyprint">filtros_con_valor</code>, y <code class="prettyprint">nombre_estructura</code>.</li>
<li>Las propiedades <code class="prettyprint">filtros</code> y <code class="prettyprint">filtros_con_valor</code> deben ser arrays.</li>
</ul>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Generar modelos hijos válidos</h2>
<p>$modelo = new modelo_base();
$modelo-&gt;hijo = [
'usuario_direccion' =&gt; [
'filtros' =&gt; ['activo' =&gt; '1'],
'filtros_con_valor' =&gt; ['pais_id' =&gt; '1'],
'nombre_estructura' =&gt; 'UsuarioDireccion',
'namespace_model' =&gt; 'app\modelos\usuario_direccion'
]
];</p>
<p>$resultado = $this-&gt;genera_modelos_hijos($modelo);
// $resultado será:
// [
//     'usuario_direccion' =&gt; [
//         'filtros' =&gt; ['activo' =&gt; '1'],
//         'filtros_con_valor' =&gt; ['pais_id' =&gt; '1'],
//         'nombre_estructura' =&gt; 'UsuarioDireccion',
//         'namespace_model' =&gt; 'app\modelos\usuario_direccion'
//     ]
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error en un modelo hijo</h2>
<p>$modelo = new modelo_base();
$modelo-&gt;hijo = [
0 =&gt; [
'filtros' =&gt; ['activo' =&gt; '1'],
'filtros_con_valor' =&gt; ['pais_id' =&gt; '1'],
'nombre_estructura' =&gt; 'UsuarioDireccion',
'namespace_model' =&gt; 'app\modelos\usuario_direccion'
]
];</p>
<p>$resultado = $this-&gt;genera_modelos_hijos($modelo);
// Retorna un error, ya que la clave del modelo hijo es numérica:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error en key',
//     'data' =&gt; [...]
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><p>Retorna un array con la estructura de los modelos hijos. Cada modelo hijo incluye:</p>
<ul>
<li>
<code class="prettyprint">filtros</code>
</li>
<li>
<code class="prettyprint">filtros_con_valor</code>
</li>
<li>
<code class="prettyprint">nombre_estructura</code>
</li>
<li>
<code class="prettyprint">namespace_model</code>
</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_genera_registro_hijo">
        genera_registro_hijo()
        <a href="classes/base-orm-result.html#method_genera_registro_hijo" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">652</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Genera un registro hijo asociado a una fila específica utilizando un modelo y datos configurados.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">genera_registro_hijo</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$data_modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$name_modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida que los datos del modelo contengan las claves necesarias (<code class="prettyprint">nombre_estructura</code>, <code class="prettyprint">namespace_model</code>).</li>
<li>Obtiene el filtro para el registro hijo utilizando la información del modelo y la fila proporcionada.</li>
<li>Asigna los registros hijos a la fila bajo la clave especificada en <code class="prettyprint">$data_modelo['nombre_estructura']</code>.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$data_modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Datos del modelo que contienen la configuración para generar los registros hijos:</p>
<ul>
<li>
<code class="prettyprint">nombre_estructura</code>: Clave donde se asignarán los registros hijos en la fila.</li>
<li>
<code class="prettyprint">namespace_model</code>: Namespace del modelo a utilizar.</li>
</ul>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia de un modelo base para generar el modelo objetivo.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$name_modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del modelo que se utilizará para obtener los registros hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Fila en la que se agregarán los registros hijos.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_genera_registro_hijo#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Generación exitosa de registros hijos</h2>
<p>$data_modelo = [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['parent_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
];
$modelo_base = new modelo_base($link);
$name_modelo = 'factura_detalle';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registro_hijo(
data_modelo: $data_modelo,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
row: $row
);</p>
<p>// Resultado:
// [
//     'id' =&gt; 1,
//     'nombre' =&gt; 'Factura 1',
//     'detalles' =&gt; [
//         ['id' =&gt; 101, 'parent_id' =&gt; 1, 'activo' =&gt; 'SI'],
//         ['id' =&gt; 102, 'parent_id' =&gt; 1, 'activo' =&gt; 'SI']
//     ]
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error por datos incompletos en <code class="prettyprint">$data_modelo</code></h2>
<p>$data_modelo = [
'namespace_model' =&gt; 'gamboamartin\facturacion\models'
];
$modelo_base = new modelo_base($link);
$name_modelo = 'factura_detalle';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registro_hijo(
data_modelo: $data_modelo,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
row: $row
);</p>
<p>// Retorna un arreglo de error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error debe existir $data_modelo['nombre_estructura']',
//     'data' =&gt; $data_modelo
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error al asignar registros hijos</h2>
<p>$data_modelo = [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['parent_id' =&gt; 'id'],
'filtros_con_valor' =&gt; []
];
$modelo_base = new modelo_base($link);
$name_modelo = 'factura_detalle';
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registro_hijo(
data_modelo: $data_modelo,
modelo_base: $modelo_base,
name_modelo: $name_modelo,
row: $row
);</p>
<p>// Si el modelo no genera registros correctamente, se devuelve un error.
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error al asignar registros de hijo',
//     'data' =&gt; ...
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna la fila <code class="prettyprint">$row</code> con los registros hijos asignados bajo la clave <code class="prettyprint">$data_modelo['nombre_estructura']</code>.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la ejecución.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_genera_registros_hijos">
        genera_registros_hijos()
        <a href="classes/base-orm-result.html#method_genera_registros_hijos" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">799</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Genera registros hijos para una fila específica utilizando modelos configurados.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">genera_registros_hijos</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelos_hijos</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Itera sobre los modelos hijos proporcionados en <code class="prettyprint">$modelos_hijos</code> y valida su estructura.</li>
<li>Valida que cada modelo hijo tenga las claves necesarias (<code class="prettyprint">nombre_estructura</code>, <code class="prettyprint">namespace_model</code>).</li>
<li>Llama al método <code class="prettyprint">genera_registro_hijo</code> para generar y asignar los registros hijos a la fila.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base utilizado para generar los modelos hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelos_hijos</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array asociativo de modelos hijos configurados, donde cada clave es el nombre del modelo
y el valor es un array con las configuraciones:</p>
<ul>
<li>
<code class="prettyprint">nombre_estructura</code>: Clave donde se almacenarán los registros hijos.</li>
<li>
<code class="prettyprint">namespace_model</code>: Namespace del modelo hijo.</li>
<li>
<code class="prettyprint">filtros</code>: Array de configuración de filtros.</li>
<li>
<code class="prettyprint">filtros_con_valor</code>: Array con filtros adicionales con valores específicos.</li>
</ul>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Fila a la que se agregarán los registros hijos.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_genera_registros_hijos#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Generar registros hijos exitosamente</h2>
<p>$modelos_hijos = [
'factura_detalle' =&gt; [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['parent_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
]
];
$modelo_base = new modelo_base($link);
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registros_hijos(
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Resultado:
// [
//     'id' =&gt; 1,
//     'nombre' =&gt; 'Factura 1',
//     'detalles' =&gt; [
//         ['id' =&gt; 101, 'parent_id' =&gt; 1, 'activo' =&gt; 'SI'],
//         ['id' =&gt; 102, 'parent_id' =&gt; 1, 'activo' =&gt; 'SI']
//     ]
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error en datos de <code class="prettyprint">$modelos_hijos</code></h2>
<p>$modelos_hijos = [
'factura_detalle' =&gt; [
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['parent_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
]
];
$modelo_base = new modelo_base($link);
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registros_hijos(
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Retorna un arreglo de error indicando que falta la clave <code class="prettyprint">nombre_estructura</code>:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error debe existir $data_modelo['nombre_estructura']',
//     'data' =&gt; $modelos_hijos['factura_detalle'],
//     ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error por <code class="prettyprint">$name_modelo</code> no válido</h2>
<p>$modelos_hijos = [
123 =&gt; [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['parent_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
]
];
$modelo_base = new modelo_base($link);
$row = ['id' =&gt; 1, 'nombre' =&gt; 'Factura 1'];</p>
<p>$resultado = $this-&gt;genera_registros_hijos(
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
row: $row
);</p>
<p>// Retorna un arreglo de error indicando que <code class="prettyprint">$name_modelo</code> debe ser un string:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error $name_modelo debe ser un string',
//     ...
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna la fila <code class="prettyprint">$row</code> con los registros hijos asignados en las claves especificadas.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la ejecución.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_init_result_base">
        init_result_base()
        <a href="classes/base-orm-result.html#method_init_result_base" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">893</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Inicializa el resultado base para un modelo y prepara un objeto con los datos procesados.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">init_result_base</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$consulta</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$n_registros</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Actualiza las propiedades del modelo con los registros, número de registros y la consulta SQL.</li>
<li>Crea un objeto <code class="prettyprint">stdClass</code> que contiene los mismos datos que se asignan al modelo, además de los totales acumulados.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$consulta</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>La consulta SQL ejecutada.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>El modelo al que se asignarán los registros procesados y los datos resultantes.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$n_registros</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Número total de registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array con los registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto con los totales acumulados para las columnas especificadas.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_init_result_base#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Inicialización exitosa de resultados</h2>
<p>$consulta = &quot;SELECT * FROM facturas&quot;;
$modelo = new modelo_base($link);
$n_registros = 10;
$new_array = [
['id' =&gt; 1, 'total' =&gt; 100],
['id' =&gt; 2, 'total' =&gt; 200],
];
$totales_rs = new stdClass();
$totales_rs-&gt;total = 300;</p>
<p>$resultado = $this-&gt;init_result_base($consulta, $modelo, $n_registros, $new_array, $totales_rs);
// $resultado contendrá un objeto con los datos:
// {
//     &quot;registros&quot;: [...],
//     &quot;n_registros&quot;: 10,
//     &quot;sql&quot;: &quot;SELECT * FROM facturas&quot;,
//     &quot;totales&quot;: {&quot;total&quot;: 300}
// }</p>
<p>// Además, el modelo tendrá las siguientes propiedades actualizadas:
// $modelo-&gt;registros = [...];
// $modelo-&gt;n_registros = 10;
// $modelo-&gt;sql = &quot;SELECT * FROM facturas&quot;;</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">void</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Este método no genera excepciones ni errores directos.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto con los siguientes campos:
<ul>
<li>
<code class="prettyprint">registros</code>: Los registros procesados.</li>
<li>
<code class="prettyprint">n_registros</code>: Número de registros procesados.</li>
<li>
<code class="prettyprint">sql</code>: La consulta SQL ejecutada.</li>
<li>
<code class="prettyprint">totales</code>: Los totales acumulados para las columnas especificadas.</li>
</ul>
</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_maqueta_arreglo_registros">
        maqueta_arreglo_registros()
        <a href="classes/base-orm-result.html#method_maqueta_arreglo_registros" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">997</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Maqueta un arreglo de registros procesando cada fila obtenida de una consulta SQL.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">maqueta_arreglo_registros</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campos_encriptados</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelos_hijos</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\PDOStatement">PDOStatement</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$r_sql</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Convierte cada fila del resultado de la consulta (<code class="prettyprint">PDOStatement</code>) en un array.</li>
<li>Ajusta cada fila para incluir valores desencriptados y registros hijos, si están configurados.</li>
<li>Retorna un arreglo con las filas procesadas.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campos_encriptados</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Lista de columnas que contienen valores encriptados y deben ser desencriptados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base que se utiliza para procesar los registros hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelos_hijos</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Configuración de modelos hijos que se utilizarán para agregar datos relacionados.</p>
<ul>
<li>La clave es el nombre del modelo hijo.</li>
<li>El valor es un array con configuraciones como <code class="prettyprint">nombre_estructura</code>, <code class="prettyprint">namespace_model</code>, etc.</li>
</ul>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$r_sql</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\PDOStatement">PDOStatement</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Resultado de la consulta SQL ejecutada, obtenido como un objeto <code class="prettyprint">PDOStatement</code>.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_maqueta_arreglo_registros#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Procesar registros de una consulta con desencriptación y modelos hijos</h2>
<p>$campos_encriptados = ['nombre', 'email'];
$modelo_base = new modelo_base($link);
$modelos_hijos = [
'detalle_factura' =&gt; [
'nombre_estructura' =&gt; 'detalles',
'namespace_model' =&gt; 'gamboamartin\facturacion\models',
'filtros' =&gt; ['factura_id' =&gt; 'id'],
'filtros_con_valor' =&gt; ['activo' =&gt; 'SI']
]
];
$r_sql = $pdo-&gt;query(&quot;SELECT * FROM factura&quot;);</p>
<p>$resultado = $this-&gt;maqueta_arreglo_registros(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
r_sql: $r_sql
);</p>
<p>// Resultado:
// [
//     [
//         'id' =&gt; 1,
//         'nombre' =&gt; 'NombreDesencriptado',
//         'email' =&gt; 'EmailDesencriptado',
//         'detalles' =&gt; [
//             ['id' =&gt; 101, 'factura_id' =&gt; 1, 'activo' =&gt; 'SI'],
//             ['id' =&gt; 102, 'factura_id' =&gt; 1, 'activo' =&gt; 'SI']
//         ]
//     ],
//     ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Procesar registros sin modelos hijos</h2>
<p>$campos_encriptados = ['nombre'];
$modelo_base = new modelo_base($link);
$modelos_hijos = [];
$r_sql = $pdo-&gt;query(&quot;SELECT * FROM usuarios&quot;);</p>
<p>$resultado = $this-&gt;maqueta_arreglo_registros(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
modelos_hijos: $modelos_hijos,
r_sql: $r_sql
);</p>
<p>// Resultado:
// [
//     [
//         'id' =&gt; 1,
//         'nombre' =&gt; 'NombreDesencriptado',
//         ...
//     ],
//     ...
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un arreglo de registros procesados, con valores desencriptados y registros hijos.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la ejecución.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_maqueta_result">
        maqueta_result()
        <a href="classes/base-orm-result.html#method_maqueta_result" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1088</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Prepara y estructura el resultado de una consulta en un formato estándar.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">maqueta_result</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$consulta</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$n_registros</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Inicializa los datos base del resultado utilizando <code class="prettyprint">init_result_base</code>.</li>
<li>Construye un objeto completo de resultado utilizando <code class="prettyprint">result</code>.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$consulta</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>La consulta SQL ejecutada.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>El modelo base que contiene la información de los campos y datos relacionados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$n_registros</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Número total de registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array con los registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto con los totales acumulados para las columnas especificadas.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_maqueta_result#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Generación exitosa de resultado</h2>
<p>$consulta = &quot;SELECT * FROM productos&quot;;
$modelo = new modelo_base($link);
$modelo-&gt;campos_entidad = ['id', 'nombre', 'precio'];
$n_registros = 10;
$new_array = [
['id' =&gt; 1, 'nombre' =&gt; 'Producto A', 'precio' =&gt; 100],
['id' =&gt; 2, 'nombre' =&gt; 'Producto B', 'precio' =&gt; 200],
];
$totales_rs = new stdClass();
$totales_rs-&gt;precio = 300;</p>
<p>$resultado = $this-&gt;maqueta_result($consulta, $modelo, $n_registros, $new_array, $totales_rs);
// $resultado contendrá un objeto con los datos del resultado:
// {
//     &quot;registros&quot;: [...],
//     &quot;n_registros&quot;: 10,
//     &quot;sql&quot;: &quot;SELECT * FROM productos&quot;,
//     &quot;campos_entidad&quot;: [&quot;id&quot;, &quot;nombre&quot;, &quot;precio&quot;],
//     &quot;totales&quot;: {&quot;precio&quot;: 300},
//     &quot;registros_obj&quot;: [
//         {&quot;id&quot;: 1, &quot;nombre&quot;: &quot;Producto A&quot;, &quot;precio&quot;: 100},
//         {&quot;id&quot;: 2, &quot;nombre&quot;: &quot;Producto B&quot;, &quot;precio&quot;: 200}
//     ]
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error durante la inicialización de resultados</h2>
<p>$consulta = &quot;&quot;;
$resultado = $this-&gt;maqueta_result($consulta, $modelo, $n_registros, $new_array, $totales_rs);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; &quot;Error al parsear resultado&quot;,
//   'data' =&gt; ...
// ]</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto <code class="prettyprint">stdClass</code> con los siguientes campos si el proceso es exitoso:
<ul>
<li>
<code class="prettyprint">registros</code>: Array con los registros procesados.</li>
<li>
<code class="prettyprint">n_registros</code>: Número total de registros procesados.</li>
<li>
<code class="prettyprint">sql</code>: La consulta SQL ejecutada.</li>
<li>
<code class="prettyprint">campos_entidad</code>: Los campos de la entidad del modelo.</li>
<li>
<code class="prettyprint">totales</code>: Objeto con los totales acumulados.</li>
<li>
<code class="prettyprint">registros_obj</code>: Array con los registros procesados como objetos.</li>
</ul>
</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_parsea_registros_envio">
        parsea_registros_envio()
        <a href="classes/base-orm-result.html#method_parsea_registros_envio" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1200</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Procesa registros obtenidos de una consulta SQL para su envío, desencriptando campos
y agregando registros hijos relacionados.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">parsea_registros_envio</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campos_encriptados</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo_base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\PDOStatement">PDOStatement</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$r_sql</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Genera la configuración de los modelos hijos asociados al modelo base.</li>
<li>Maqueta los registros obtenidos de la consulta, desencriptando campos y agregando
registros hijos según sea necesario.</li>
<li>Retorna un arreglo de registros procesados y listos para envío.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campos_encriptados</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Lista de campos que contienen valores encriptados que deben ser desencriptados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo_base</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo base que contiene la configuración de los modelos hijos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$r_sql</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\PDOStatement">PDOStatement</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Resultado de la consulta SQL, como un objeto <code class="prettyprint">PDOStatement</code>.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_parsea_registros_envio#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Procesar registros con campos encriptados y modelos hijos</h2>
<p>$campos_encriptados = ['nombre', 'email'];
$modelo_base = new modelo_base($link);
$r_sql = $pdo-&gt;query(&quot;SELECT * FROM factura&quot;);</p>
<p>$resultado = $this-&gt;parsea_registros_envio(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
r_sql: $r_sql
);</p>
<p>// Resultado:
// [
//     [
//         'id' =&gt; 1,
//         'nombre' =&gt; 'NombreDesencriptado',
//         'email' =&gt; 'EmailDesencriptado',
//         'detalles' =&gt; [
//             ['id' =&gt; 101, 'factura_id' =&gt; 1, 'activo' =&gt; 'SI'],
//             ...
//         ]
//     ],
//     ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Procesar registros sin modelos hijos</h2>
<p>$campos_encriptados = ['nombre'];
$modelo_base = new modelo_base($link);
$r_sql = $pdo-&gt;query(&quot;SELECT * FROM usuarios&quot;);</p>
<p>$resultado = $this-&gt;parsea_registros_envio(
campos_encriptados: $campos_encriptados,
modelo_base: $modelo_base,
r_sql: $r_sql
);</p>
<p>// Resultado:
// [
//     [
//         'id' =&gt; 1,
//         'nombre' =&gt; 'NombreDesencriptado',
//         ...
//     ],
//     ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si ocurre un error al generar modelos hijos o procesar registros, se retorna un arreglo con detalles del error.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un arreglo con los registros procesados, incluyendo valores desencriptados y datos de modelos hijos.</li>
<li>Si ocurre un error durante el proceso, retorna un arreglo de error con detalles del problema.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_result">
        result()
        <a href="classes/base-orm-result.html#method_result" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1278</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Genera un objeto de resultado con la información procesada de una consulta.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">result</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$consulta</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">int&nbsp;</span><span class="phpdocumentor-signature__argument__name">$n_registros</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Crea un objeto <code class="prettyprint">stdClass</code> que incluye los registros, el número de registros, la consulta SQL,
los campos de la entidad y los totales acumulados.</li>
<li>Convierte los registros procesados en objetos y los asigna a una propiedad adicional.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$consulta</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>La consulta SQL ejecutada.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>El modelo que contiene los campos de la entidad y la estructura de datos.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$n_registros</span>
                : <span class="phpdocumentor-signature__argument__return-type">int</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Número total de registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array con los registros procesados.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto con los totales acumulados para las columnas especificadas.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_result#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Generación de resultados exitosos</h2>
<p>$consulta = &quot;SELECT * FROM usuarios&quot;;
$modelo = new modelo_base($link);
$modelo-&gt;campos_entidad = ['id', 'nombre', 'email'];
$n_registros = 5;
$new_array = [
['id' =&gt; 1, 'nombre' =&gt; 'Juan', 'email' =&gt; 'juan@example.com'],
['id' =&gt; 2, 'nombre' =&gt; 'Ana', 'email' =&gt; 'ana@example.com'],
];
$totales_rs = new stdClass();
$totales_rs-&gt;email = 2;</p>
<p>$resultado = $this-&gt;result($consulta, $modelo, $n_registros, $new_array, $totales_rs);
// $resultado contendrá un objeto con los datos:
// {
//     &quot;registros&quot;: [...],
//     &quot;n_registros&quot;: 5,
//     &quot;sql&quot;: &quot;SELECT * FROM usuarios&quot;,
//     &quot;campos_entidad&quot;: [&quot;id&quot;, &quot;nombre&quot;, &quot;email&quot;],
//     &quot;totales&quot;: {&quot;email&quot;: 2},
//     &quot;registros_obj&quot;: [
//         {&quot;id&quot;: 1, &quot;nombre&quot;: &quot;Juan&quot;, &quot;email&quot;: &quot;juan@example.com&quot;},
//         {&quot;id&quot;: 2, &quot;nombre&quot;: &quot;Ana&quot;, &quot;email&quot;: &quot;ana@example.com&quot;}
//     ]
// }</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">void</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Este método no genera excepciones directas, pero puede devolver errores estructurados.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto con los siguientes campos:
<ul>
<li>
<code class="prettyprint">registros</code>: Array con los registros procesados.</li>
<li>
<code class="prettyprint">n_registros</code>: Número total de registros procesados.</li>
<li>
<code class="prettyprint">sql</code>: La consulta SQL ejecutada.</li>
<li>
<code class="prettyprint">campos_entidad</code>: Los campos de la entidad del modelo.</li>
<li>
<code class="prettyprint">totales</code>: Objeto con los totales acumulados.</li>
<li>
<code class="prettyprint">registros_obj</code>: Array con los registros procesados como objetos.</li>
</ul>
</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_result_sql">
        result_sql()
        <a href="classes/base-orm-result.html#method_result_sql" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1381</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Ejecuta una consulta SQL, procesa los registros y calcula los totales de columnas específicas.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">result_sql</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campos_encriptados</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$columnas_totales</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$consulta</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$modelo</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida que la consulta SQL no esté vacía.</li>
<li>Ejecuta la consulta SQL utilizando el modelo proporcionado.</li>
<li>Procesa los registros obtenidos para desencriptar valores y generar datos de registros hijos.</li>
<li>Calcula los totales acumulados para las columnas especificadas.</li>
<li>Retorna un objeto con los resultados, los registros procesados, el número de registros y los totales calculados.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campos_encriptados</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array de nombres de campos que deben desencriptarse en los registros.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$columnas_totales</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array de nombres de columnas para las cuales se calcularán los totales.
Cada elemento debe ser un string no vacío que represente una columna.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$consulta</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Consulta SQL a ejecutar. No debe estar vacía.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$modelo</span>
                : <span class="phpdocumentor-signature__argument__return-type"><a href="classes/base-orm-modelo-base.html"><abbr title="\base\orm\modelo_base">modelo_base</abbr></a></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Instancia del modelo que ejecutará la consulta.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_result_sql#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Ejecución exitosa con columnas para totales</h2>
<p>$campos_encriptados = ['nombre', 'apellido'];
$columnas_totales = ['subtotal', 'total'];
$consulta = 'SELECT * FROM facturas';
$modelo = new modelo_base($link);</p>
<p>$resultado = $this-&gt;result_sql($campos_encriptados, $columnas_totales, $consulta, $modelo);
// $resultado será un objeto <code class="prettyprint">stdClass</code> con los resultados procesados y los totales acumulados.</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error por consulta vacía</h2>
<p>$campos_encriptados = ['nombre', 'apellido'];
$columnas_totales = ['subtotal', 'total'];
$consulta = '';
$modelo = new modelo_base($link);</p>
<p>$resultado = $this-&gt;result_sql($campos_encriptados, $columnas_totales, $consulta, $modelo);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error consulta vacia',
//   'data' =&gt; ' tabla: nombre_de_la_tabla',
//   ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error en la ejecución de la consulta</h2>
<p>$campos_encriptados = ['nombre', 'apellido'];
$columnas_totales = ['subtotal', 'total'];
$consulta = 'SELECT * FROM tabla_inexistente';
$modelo = new modelo_base($link);</p>
<p>$resultado = $this-&gt;result_sql($campos_encriptados, $columnas_totales, $consulta, $modelo);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error al ejecutar sql',
//   'data' =&gt; [...],
//   ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si ocurre un error durante la validación, ejecución o procesamiento de los registros.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto <code class="prettyprint">stdClass</code> con los siguientes campos:
<ul>
<li>
<code class="prettyprint">result</code>: Resultado completo de la ejecución de la consulta.</li>
<li>
<code class="prettyprint">r_sql</code>: Objeto PDOStatement con los resultados SQL originales.</li>
<li>
<code class="prettyprint">new_array</code>: Array con los registros procesados.</li>
<li>
<code class="prettyprint">n_registros</code>: Número de registros procesados.</li>
<li>
<code class="prettyprint">totales</code>: Objeto con los totales acumulados para las columnas especificadas.</li>
</ul>
</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_total_rs_acumula">
        total_rs_acumula()
        <a href="classes/base-orm-result.html#method_total_rs_acumula" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1499</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Acumula el total de un campo específico de un registro en un objeto de totales.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">total_rs_acumula</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida que el campo existe, no está vacío y contiene un número válido en el registro.</li>
<li>Verifica si el campo ya existe en el objeto de totales <code class="prettyprint">$totales_rs</code>.</li>
<li>Si no existe, inicializa el valor del campo en el objeto de totales a 0.</li>
<li>Suma el valor del campo en el registro al campo correspondiente en el objeto de totales.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del campo que se debe acumular.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Registro que contiene el campo y su valor.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto que almacena los totales acumulados.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_total_rs_acumula#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Acumular un valor en un objeto de totales</h2>
<p>$campo = 'total';
$row = ['total' =&gt; 150.50, 'nombre' =&gt; 'Factura 1'];
$totales_rs = new stdClass();
$totales_rs-&gt;total = 200.00;</p>
<p>$resultado = $this-&gt;total_rs_acumula($campo, $row, $totales_rs);
// $resultado será:
// {
//     &quot;total&quot;: 350.50
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Inicializar un campo no existente en totales</h2>
<p>$campo = 'subtotal';
$row = ['subtotal' =&gt; 100.00];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;total_rs_acumula($campo, $row, $totales_rs);
// $resultado será:
// {
//     &quot;subtotal&quot;: 100.00
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error en la validación del campo</h2>
<p>$campo = 'total';
$row = ['total' =&gt; 'NoUnNumero'];
$totales_rs = new stdClass();
$totales_rs-&gt;total = 0;</p>
<p>$resultado = $this-&gt;total_rs_acumula($campo, $row, $totales_rs);
// Retorna un arreglo de error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error row[total] no es un numero valido',
//   'data' =&gt; ['total' =&gt; 'NoUnNumero'],
//   ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si el campo no es válido, no existe en el registro, o no contiene un número válido.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna el objeto <code class="prettyprint">$totales_rs</code> actualizado si todo es válido.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_total_rs_campo">
        total_rs_campo()
        <a href="classes/base-orm-result.html#method_total_rs_campo" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1590</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Calcula y acumula el total de un campo específico en un conjunto de registros.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">total_rs_campo</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Inicializa el valor del campo en <code class="prettyprint">$totales_rs</code> con 0.</li>
<li>Llama al método <code class="prettyprint">totales_rs_acumula</code> para iterar sobre los registros y sumar los valores del campo.</li>
<li>Devuelve el objeto <code class="prettyprint">$totales_rs</code> actualizado con el total acumulado del campo.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del campo que se desea calcular y acumular.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Conjunto de registros que contienen el campo a acumular.
Cada registro debe ser un array.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto que almacena los totales acumulados.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_total_rs_campo#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Calcular el total de un campo en múltiples registros</h2>
<p>$campo = 'monto';
$new_array = [
['monto' =&gt; 100.50, 'nombre' =&gt; 'Registro 1'],
['monto' =&gt; 200.75, 'nombre' =&gt; 'Registro 2']
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;total_rs_campo($campo, $new_array, $totales_rs);
// $resultado será:
// {
//     &quot;monto&quot;: 301.25
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Campo inicializado en un objeto vacío</h2>
<p>$campo = 'subtotal';
$new_array = [
['subtotal' =&gt; 50.00],
['subtotal' =&gt; 150.00]
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;total_rs_campo($campo, $new_array, $totales_rs);
// $resultado será:
// {
//     &quot;subtotal&quot;: 200.00
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error al calcular el total por datos no válidos</h2>
<p>$campo = 'total';
$new_array = [
['total' =&gt; 100.50],
['total' =&gt; 'NoUnNumero']
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;total_rs_campo($campo, $new_array, $totales_rs);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error row[total] no es un numero valido',
//   'data' =&gt; ['total' =&gt; 'NoUnNumero'],
//   ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si el campo no es válido o si algún registro tiene datos no numéricos en el campo.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna el objeto <code class="prettyprint">$totales_rs</code> actualizado con el total acumulado del campo.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_totales_rs">
        totales_rs()
        <a href="classes/base-orm-result.html#method_totales_rs" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1685</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Calcula los totales acumulados para un conjunto de columnas en un arreglo de registros.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">totales_rs</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$columnas_totales</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Inicializa un objeto <code class="prettyprint">stdClass</code> para almacenar los totales de cada columna.</li>
<li>Itera sobre el array de columnas proporcionado.</li>
<li>Para cada columna, llama al método <code class="prettyprint">total_rs_campo</code> para calcular el total acumulado en los registros.</li>
<li>Retorna un objeto <code class="prettyprint">stdClass</code> con los totales acumulados para cada columna.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$columnas_totales</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Array de nombres de columnas para las cuales se calcularán los totales.
Cada elemento debe ser un string no vacío que represente una columna.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Conjunto de registros que contienen las columnas a acumular.
Cada registro debe ser un array con valores numéricos en las columnas especificadas.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_totales_rs#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Calcular totales para múltiples columnas</h2>
<p>$columnas_totales = ['subtotal', 'impuestos', 'total'];
$new_array = [
['subtotal' =&gt; 100.00, 'impuestos' =&gt; 16.00, 'total' =&gt; 116.00],
['subtotal' =&gt; 200.00, 'impuestos' =&gt; 32.00, 'total' =&gt; 232.00],
];</p>
<p>$resultado = $this-&gt;totales_rs($columnas_totales, $new_array);
// $resultado será:
// {
//     &quot;subtotal&quot;: 300.00,
//     &quot;impuestos&quot;: 48.00,
//     &quot;total&quot;: 348.00
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Error por columna vacía en <code class="prettyprint">$columnas_totales</code></h2>
<p>$columnas_totales = ['subtotal', '', 'total'];
$new_array = [
['subtotal' =&gt; 100.00, 'total' =&gt; 116.00],
['subtotal' =&gt; 200.00, 'total' =&gt; 232.00],
];</p>
<p>$resultado = $this-&gt;totales_rs($columnas_totales, $new_array);
// Retorna un arreglo con el error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error campo esta vacio',
//     'data' =&gt; '',
//     ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error por valor no numérico en los registros</h2>
<p>$columnas_totales = ['subtotal', 'total'];
$new_array = [
['subtotal' =&gt; 100.00, 'total' =&gt; 'NoUnNumero'],
['subtotal' =&gt; 200.00, 'total' =&gt; 232.00],
];</p>
<p>$resultado = $this-&gt;totales_rs($columnas_totales, $new_array);
// Retorna un arreglo con el error:
// [
//     'error' =&gt; 1,
//     'mensaje' =&gt; 'Error row[total] no es un numero valido',
//     'data' =&gt; ['total' =&gt; 'NoUnNumero'],
//     ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si alguna columna es inválida o si algún registro tiene datos no numéricos en las columnas especificadas.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type"><abbr title="\stdClass">stdClass</abbr>|array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna un objeto <code class="prettyprint">stdClass</code> con los totales acumulados para cada columna.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_totales_rs_acumula">
        totales_rs_acumula()
        <a href="classes/base-orm-result.html#method_totales_rs_acumula" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1782</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Acumula los valores de un campo específico para un conjunto de registros.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">totales_rs_acumula</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$new_array</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$totales_rs</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Valida que el nombre del campo no esté vacío.</li>
<li>Itera sobre un array de registros (<code class="prettyprint">$new_array</code>) y valida que cada registro sea un array.</li>
<li>Para cada registro, valida la existencia y validez del campo a acumular.</li>
<li>Suma el valor del campo de cada registro al total acumulado en <code class="prettyprint">$totales_rs</code>.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del campo que se desea acumular.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$new_array</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Conjunto de registros que contienen el campo a acumular.
Cada registro debe ser un array.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$totales_rs</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\stdClass">stdClass</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Objeto que almacena los totales acumulados.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_totales_rs_acumula#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Acumular valores de un campo en múltiples registros</h2>
<p>$campo = 'monto';
$new_array = [
['monto' =&gt; 100.50, 'nombre' =&gt; 'Registro 1'],
['monto' =&gt; 200.75, 'nombre' =&gt; 'Registro 2']
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;totales_rs_acumula($campo, $new_array, $totales_rs);
// $resultado será:
// {
//     &quot;monto&quot;: 301.25
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Inicializar y acumular valores en un objeto vacío</h2>
<p>$campo = 'subtotal';
$new_array = [
['subtotal' =&gt; 50.00],
['subtotal' =&gt; 150.00]
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;totales_rs_acumula($campo, $new_array, $totales_rs);
// $resultado será:
// {
//     &quot;subtotal&quot;: 200.00
// }</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Error en un registro no válido</h2>
<p>$campo = 'total';
$new_array = [
['total' =&gt; 100.50],
['total' =&gt; 'NoUnNumero']
];
$totales_rs = new stdClass();</p>
<p>$resultado = $this-&gt;totales_rs_acumula($campo, $new_array, $totales_rs);
// Retorna un arreglo con el error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error row[total] no es un numero valido',
//   'data' =&gt; ['total' =&gt; 'NoUnNumero'],
//   ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si el campo no es válido, algún registro no es un array, o un valor no es numérico.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|<abbr title="\stdClass">stdClass</abbr></span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna el objeto <code class="prettyprint">$totales_rs</code> actualizado con el total acumulado del campo.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante el proceso.</li>
</ul>
</section>

            </section>

</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_valida_totales">
        valida_totales()
        <a href="classes/base-orm-result.html#method_valida_totales" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="orm/_result.php"><a href="files/orm-result.html"><abbr title="orm/_result.php">_result.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1886</span>

    </aside>

        <p class="phpdocumentor-summary">REG
Valida los totales en un campo específico dentro de un registro.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                    <span class="phpdocumentor-signature__name">valida_totales</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$campo</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$row</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">true|array&lt;string|int, mixed&gt;</span></code>

    <div class="phpdocumentor-label-line">
        </div>
    
        <section class="phpdocumentor-description"><p>Este método:</p>
<ol>
<li>Verifica que el nombre del campo no esté vacío.</li>
<li>Confirma que el campo existe en el arreglo <code class="prettyprint">$row</code>.</li>
<li>Asegura que el valor del campo sea un número válido.</li>
</ol>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$campo</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Nombre del campo que debe ser validado.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$row</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Registro que contiene el campo a validar.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="classes/base-orm-result.html#method_valida_totales#tags" class="headerlink"><i class="fas fa-link"></i></a>

    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 1: Validación exitosa</h2>
<p>$campo = 'total';
$row = ['total' =&gt; 100.50, 'nombre' =&gt; 'Factura'];</p>
<p>$resultado = $this-&gt;valida_totales($campo, $row);
// $resultado será <code class="prettyprint">true</code> ya que el campo <code class="prettyprint">total</code> existe y contiene un número válido.</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 2: Campo vacío</h2>
<p>$campo = '';
$row = ['total' =&gt; 100.50];</p>
<p>$resultado = $this-&gt;valida_totales($campo, $row);
// Retorna un arreglo de error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error campo esta vacio',
//   'data' =&gt; '',
//   ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 3: Campo no existe en el registro</h2>
<p>$campo = 'subtotal';
$row = ['total' =&gt; 100.50];</p>
<p>$resultado = $this-&gt;valida_totales($campo, $row);
// Retorna un arreglo de error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error row[subtotal] NO EXISTE',
//   'data' =&gt; ['total' =&gt; 100.50],
//   ...
// ]</p>
</section>

                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">example</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                
                                                 <section class="phpdocumentor-description"><h2>Ejemplo 4: Valor del campo no es un número válido</h2>
<p>$campo = 'total';
$row = ['total' =&gt; 'NoUnNumero'];</p>
<p>$resultado = $this-&gt;valida_totales($campo, $row);
// Retorna un arreglo de error:
// [
//   'error' =&gt; 1,
//   'mensaje' =&gt; 'Error row[total] no es un numero valido',
//   'data' =&gt; ['total' =&gt; 'NoUnNumero'],
//   ...
// ]</p>
</section>

                                    </dd>
                                                <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">throws</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                <span class="phpdocumentor-tag-link">array&lt;string|int, mixed&gt;</span>
                                                            
                                                 <section class="phpdocumentor-description"><p>Si el campo está vacío, no existe en el registro, o no es un número válido.</p>
</section>

                                    </dd>
                                            </dl>

    

            <section>
        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
        <span class="phpdocumentor-signature__response_type">true|array&lt;string|int, mixed&gt;</span>
                    &mdash;
                <section class="phpdocumentor-description"><ul>
<li>Retorna <code class="prettyprint">true</code> si el campo es válido.</li>
<li>Retorna un arreglo de error si ocurre algún problema durante la validación.</li>
</ul>
</section>

            </section>

</article>
            </section>

        <div class="phpdocumentor-modal" id="source-view">
    <div class="phpdocumentor-modal-bg" data-exit-button></div>
    <div class="phpdocumentor-modal-container">
        <div class="phpdocumentor-modal-content">
            <pre style="max-height: 500px; overflow-y: scroll" data-src="files/orm/_result.php.txt" class="language-php line-numbers linkable-line-numbers"></pre>
        </div>
        <button data-exit-button class="phpdocumentor-modal__close">&times;</button>
    </div>
</div>

    <script type="text/javascript">
        (function () {
            function loadExternalCodeSnippet(el, url, line) {
                Array.prototype.slice.call(el.querySelectorAll('pre[data-src]')).forEach((pre) => {
                    const src = url || pre.getAttribute('data-src').replace(/\\/g, '/');
                    const language = 'php';

                    const code = document.createElement('code');
                    code.className = 'language-' + language;
                    pre.textContent = '';
                    pre.setAttribute('data-line', line)
                    code.textContent = 'Loading…';
                    pre.appendChild(code);

                    var xhr = new XMLHttpRequest();

                    xhr.open('GET', src, true);

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState !== 4) {
                            return;
                        }

                        if (xhr.status < 400 && xhr.responseText) {
                            code.textContent = xhr.responseText;
                            Prism.highlightElement(code);
                            return;
                        }

                        if (xhr.status === 404) {
                            code.textContent = '✖ Error: File could not be found';
                            return;
                        }

                        if (xhr.status >= 400) {
                            code.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
                            return;
                        }

                        code.textContent = '✖ Error: An unknown error occurred';
                    };

                    xhr.send(null);
                });
            }

            const modalButtons = document.querySelectorAll("[data-modal]");
            const openedAsLocalFile = window.location.protocol === 'file:';
            if (modalButtons.length > 0 && openedAsLocalFile) {
                console.warn(
                    'Viewing the source code is unavailable because you are opening this page from the file:// scheme; ' +
                    'browsers block XHR requests when a page is opened this way'
                );
            }

            modalButtons.forEach(function (trigger) {
                if (openedAsLocalFile) {
                    trigger.setAttribute("hidden", "hidden");
                }

                trigger.addEventListener("click", function (event) {
                    event.preventDefault();
                    const modal = document.getElementById(trigger.dataset.modal);
                    if (!modal) {
                        console.error(`Modal with id "${trigger.dataset.modal}" could not be found`);
                        return;
                    }
                    modal.classList.add("phpdocumentor-modal__open");

                    loadExternalCodeSnippet(modal, trigger.dataset.src || null, trigger.dataset.line)
                    const exits = modal.querySelectorAll("[data-exit-button]");
                    exits.forEach(function (exit) {
                        exit.addEventListener("click", function (event) {
                            event.preventDefault();
                            modal.classList.remove("phpdocumentor-modal__open");
                        });
                    });
                });
            });
        })();
    </script>

    </article>
                                </section>
                <section class="phpdocumentor-on-this-page__sidebar">
                                
    <section class="phpdocumentor-on-this-page__content">
        <strong class="phpdocumentor-on-this-page__title">On this page</strong>

        <ul class="phpdocumentor-list -clean">
            <li class="phpdocumentor-on-this-page-section__title">Table Of Contents</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                                            <li><a href="classes/base-orm-result.html#toc-properties">Properties</a></li>
                                                            <li><a href="classes/base-orm-result.html#toc-methods">Methods</a></li>
                                    </ul>
            </li>
            
                            <li class="phpdocumentor-on-this-page-section__title">Properties</li>
                <li>
                    <ul class="phpdocumentor-list -clean">
                                                    <li class=""><a href="classes/base-orm-result.html#property_error">$error</a></li>
                                                    <li class=""><a href="classes/base-orm-result.html#property_validacion">$validacion</a></li>
                                            </ul>
                </li>
            
                        <li class="phpdocumentor-on-this-page-section__title">Methods</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                            <li class=""><a href="classes/base-orm-result.html#method___construct">__construct()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_data_result">data_result()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_ajusta_row_select">ajusta_row_select()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_asigna_registros_hijo">asigna_registros_hijo()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_genera_modelos_hijos">genera_modelos_hijos()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_genera_registro_hijo">genera_registro_hijo()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_genera_registros_hijos">genera_registros_hijos()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_init_result_base">init_result_base()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_maqueta_arreglo_registros">maqueta_arreglo_registros()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_maqueta_result">maqueta_result()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_parsea_registros_envio">parsea_registros_envio()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_result">result()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_result_sql">result_sql()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_total_rs_acumula">total_rs_acumula()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_total_rs_campo">total_rs_campo()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_totales_rs">totales_rs()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_totales_rs_acumula">totales_rs_acumula()</a></li>
                                            <li class=""><a href="classes/base-orm-result.html#method_valida_totales">valida_totales()</a></li>
                                    </ul>
            </li>
                    </ul>
    </section>

                </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="classes/base-orm-result.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
